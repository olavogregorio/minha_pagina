if (self.CavalryLogger) { CavalryLogger.start_js(["kwATM"]); }

__d("LiveVideoWWWBeeperTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:LiveVideoWWWBeeperLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:LiveVideoWWWBeeperLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:LiveVideoWWWBeeperLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};c.setOwnerID=function(a){this.$1.owner_id=a;return this};c.setPersistDuration=function(a){this.$1.persist_duration=a;return this};c.setSenderID=function(a){this.$1.sender_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTimeToHide=function(a){this.$1.time_to_hide=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setVideoID=function(a){this.$1.video_id=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={event:!0,owner_id:!0,persist_duration:!0,sender_id:!0,time:!0,time_to_hide:!0,vc:!0,video_id:!0,weight:!0};e.exports=a}),null);
__d("LiveVideoBeeperItemContentsImpl.react",["cx","invariant","ix","Animation","Arbiter","AsyncRequest","Bootloader","ErrorUtils","FBProfilePhotoShadow.react","Image.react","ImageBlock.react","LiveVideoBroadcastStatusUpdateSubscriptionHack","LiveVideoWWWBeeperTypedLogger","NotificationBeeperItemCloseButton.react","NotificationURI","NotificationUserActions","React","ReactDOM","SubscriptionsHandler","TextWithEntities.react","Timestamp.react","URI","VideoBroadcastStatus","VideoComponentLiveAudioAnimation.react","VideoComponentLiveVideoIndicator.react","VideoDataContainer.react","VideoPermalinkURI","VideoPlayer.react","Visibility","XLiveVideoBroadcastStatusController","notificationListRendererOpenNotification","nullthrows","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=b("React");a="LiveVideoBeeperEvents/Mount";var m={Mount:a};function n(a,b){return l.jsx("span",{className:"fwb",children:a})}c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={subscriptionsHandler:new(b("SubscriptionsHandler"))()},d.$4=function(a){d.$3("click");d.$2();d.props.onHide();if(a.button===1||a.altKey||a.ctrlKey||a.metaKey||a.shiftKey)return;var c=d.props.notification;b("notificationListRendererOpenNotification")(a,c);if(a.isDefaultPrevented()===!0)return;var e=c.primerAttributes;if(e&&(e.rel==="async"||e.rel==="async-post")){var f=new(b("AsyncRequest"))(e.ajaxify||c.url);e.rel==="async-post"&&f.setMethod("POST");f.send();a.preventDefault()}else e&&e.rel==="theater"?(a.persist(),b("Bootloader").loadModules(["PhotoSnowlift"],function(b){b.bootstrap(e.ajaxify||c.url,a.currentTarget)},"LiveVideoBeeperItemContentsImpl.react")):e&&(e.rel==="dialog"||e.rel==="dialog-post")&&(b("Bootloader").loadModules(["AsyncDialog"],function(b){b.bootstrap(e.ajaxify||c.url,a.currentTarget,"dialog")},"LiveVideoBeeperItemContentsImpl.react"),a.preventDefault())},d.$10=function(){d.$3("render_preview")},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$1=function(){var a=this.props.notification.renderer_data;a==null||a.__typename==="LiveVideoNotificationRendererData"||h(0,6009,a&&a.__typename);return a};d.$2=function(){b("NotificationUserActions").markNotificationsAsRead([this.props.notification.alert_id])};d.$3=function(a){var c=this.$1();if(c==null)return;var d=null;a!=="render"&&this.renderTimestamp&&(d=Date.now()-this.renderTimestamp);(j||(j=b("ErrorUtils"))).applyWithGuard(function(){var e;new(b("LiveVideoWWWBeeperTypedLogger"))().setEvent(a).setOwnerID((e=b("nullthrows"))(c.owner_id)).setVideoID(e(c.video_id)).setSenderID(e(c.sender_id)).setTimeToHide(e(c.beeper_time_to_hide)).setPersistDuration(d).log()})};d.$5=function(a){this.$3(a),this.$2(),this.props.onHide(),this.state.subscriptionsHandler.release()};d.$6=function(){new(b("Animation"))(b("ReactDOM").findDOMNode(this.refs.inner)).from("opacity","0").to("opacity","1").duration(200).go()};d.$7=function(a){var c=this;a=b("XLiveVideoBroadcastStatusController").getURIBuilder().setFBID("video_id",a).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(function(a){a.payload.broadcast_status!=b("VideoBroadcastStatus").LIVE&&c.$5("broadcast_end")}).send()};d.UNSAFE_componentWillMount=function(){var a=this;b("Bootloader").loadModules(["VideoPlayerMetaData"],function(b){var c=a.$8();c&&b.genVideoData(c)},"LiveVideoBeeperItemContentsImpl.react")};d.componentDidMount=function(){var a=this;this.$3("render");this.renderTimestamp=Date.now();b("Arbiter").inform(m.Mount);var c=this.$1();if(c){var d=c.beeper_time_to_hide!=null?c.beeper_time_to_hide:3;if(d===0){this.props.onReadyToHide(this.props.notification.alert_id);return}this.props.onPreventHide(this.props.notification.alert_id);d>0&&b("setTimeoutAcrossTransitions")(function(){a.props.onReadyToHide(a.props.notification.alert_id)},d);var e=b("nullthrows")(c.video_id);this.state.subscriptionsHandler.addSubscriptions(b("Arbiter").subscribe(m.Mount,function(){a.$5("replace")}),b("Visibility").addListener(b("Visibility").VISIBLE,function(){a.$7(e)}),b("LiveVideoBroadcastStatusUpdateSubscriptionHack").subscribe(e,function(c){c=c.live_video_broadcast_status_update_subscribe;c=c.video_broadcast_status;c!==b("VideoBroadcastStatus").LIVE&&a.$5("broadcast_end")}))}else this.props.onReadyToHide(this.props.notification.alert_id)};d.$8=function(){var a=this.$9();a=JSON.parse(a);return a.content_id};d.$9=function(){return this.props.notification.tracking||"{}"};d.componentWillUnmount=function(){this.state.subscriptionsHandler.release()};d.componentDidUpdate=function(a){(a.notification.alert_id!==this.props.notification.alert_id||a.notification.creation_time!==this.props.notification.creation_time)&&(this.$6(),this.props.onReadyToHide(this.props.notification.alert_id))};d.render=function(){var a=this,c=this.$1(),d=new((k||(k=b("URI"))).getRequestURI)();if(!c||!c.video_id){this.$3("render_error");return null}if(b("VideoPermalinkURI").isValid(d)){d=b("VideoPermalinkURI").parse(d);if(d!=null&&c!=null&&d.video_id===c.video_id)return null}d=c&&!c.is_pre_live?l.jsx("div",{className:"_3qez",children:l.jsx(b("VideoDataContainer.react"),{videoID:b("nullthrows")(c.video_id),onVideoLoaded:this.$10,children:l.jsxs(b("VideoPlayer.react"),{autoplay:!0,width:170,height:95,subOrigin:"live_beeper",startMuted:!0,videoData:b("VideoDataContainer.react").VIDEO_DATA_PLACEHOLDER,children:[l.jsx(b("VideoComponentLiveVideoIndicator.react"),{inBeeper:!0}),l.jsx(b("VideoComponentLiveAudioAnimation.react"),{})]})})}):null;c=this.props.notification;var e=c.thumbnail?c.thumbnail.uri:i("97000"),f=b("NotificationURI").localize(new k(c.url));return l.jsxs("div",{ref:"inner",className:this.props.className,children:[l.jsx(b("NotificationBeeperItemCloseButton.react"),{onClick:function(){return a.$5("close")}}),l.jsx("a",{href:f,onClick:this.$4,className:"_3soi",children:l.jsxs(b("ImageBlock.react"),{className:"_3soj",spacing:"medium",children:[l.jsx(b("FBProfilePhotoShadow.react"),{className:"_2yt7",children:l.jsx(b("Image.react"),{src:e,className:"_3sok"+(e?"":" hidden_elem")})}),l.jsxs("div",{className:"_3sol",children:[l.jsx("div",{className:"_2exx",children:l.jsx(b("TextWithEntities.react"),{renderEmoticons:!0,renderEmoji:!0,interpolator:n,ranges:c.title.ranges,aggregatedranges:c.title.aggregated_ranges,text:c.title.text})}),d,l.jsxs(b("ImageBlock.react"),{className:"_3som",children:[l.jsx(b("Image.react"),{className:"_1x8t",src:i("82430")}),l.jsx(b("Timestamp.react"),{time:c.timestamp.time,text:c.timestamp.text,verbose:c.timestamp.verbose})]})]})]})})]})};return c}(l.Component);e.exports=c}),null);