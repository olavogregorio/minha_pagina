if (self.CavalryLogger) { CavalryLogger.start_js(["mKoBI"]); }

__d("LiveVideoBroadcastStatusUpdateSubscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input",type:"LiveVideoBroadcastStatusUpdateSubscribeData!"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"LiveVideoBroadcastStatusUpdateSubscribeResponsePayload",kind:"LinkedField",name:"live_video_broadcast_status_update_subscribe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"video_broadcast_status",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LiveVideoBroadcastStatusUpdateSubscription",selections:b,type:"Subscription"},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LiveVideoBroadcastStatusUpdateSubscription",selections:b},params:{id:"3340309276041534",metadata:{subscriptionName:"live_video_broadcast_status_update_subscribe"},name:"LiveVideoBroadcastStatusUpdateSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("VideoBroadcastScheduleSetStartTimeSubscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input",type:"VideoBroadcastScheduleSetStartTimeSubscribeData!"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"VideoBroadcastScheduleSetStartTimeResponsePayload",kind:"LinkedField",name:"video_broadcast_schedule_set_start_time_subscribe",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoBroadcastSchedule",kind:"LinkedField",name:"video_broadcast_schedule",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"start_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"rescheduled_heading",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"rescheduled_endscreen_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"rescheduled_endscreen_body",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lobby_open_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"running_late_start_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"expiration_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"formatted_start_time",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"VideoBroadcastScheduleSetStartTimeSubscription",selections:b,type:"Subscription"},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"VideoBroadcastScheduleSetStartTimeSubscription",selections:b},params:{id:"3573127302697264",metadata:{subscriptionName:"video_broadcast_schedule_set_start_time_subscribe"},name:"VideoBroadcastScheduleSetStartTimeSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("ScheduledLiveVideoPostMetadataQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id",type:"ID!"}],b=[{kind:"Variable",name:"id",variableName:"id"}],c={alias:null,args:null,kind:"ScalarField",name:"start_time",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"start_countdown_duration",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"broadcast_status",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"feedback_id",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"ScheduledLiveVideoPostMetadataQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[c,d,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"scheduled_video",plural:!1,selections:[e,f],storageKey:null}],type:"ScheduledLiveMetadata"}],storageKey:null}],type:"Query"},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ScheduledLiveVideoPostMetadataQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},g,{kind:"InlineFragment",selections:[c,d,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"scheduled_video",plural:!1,selections:[e,f,g],storageKey:null}],type:"ScheduledLiveMetadata"}],storageKey:null}]},params:{id:"2489384281088584",metadata:{},name:"ScheduledLiveVideoPostMetadataQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("LiveVideoBroadcastStatusUpdateSubscription",["BaseGraphQLSubscription","relay-runtime","LiveVideoBroadcastStatusUpdateSubscription.graphql"],(function(a,b,c,d,e,f){var g;b("relay-runtime").graphql;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getTopic=function(a){return"gqls/"+this.getSubscriptionName()+"/video_id_"+a};d.getQuery=function(){return g!==void 0?g:g=b("LiveVideoBroadcastStatusUpdateSubscription.graphql")};d.getQueryParameters=function(a){return{input:{video_id:a}}};return c}(b("BaseGraphQLSubscription"));e.exports=a}),null);
__d("LiveVideoBroadcastStatusUpdateSubscriptionHack",["LiveVideoBroadcastStatusUpdateSubscription"],(function(a,b,c,d,e,f){var g=new Map(),h=new Map();a={subscribe:function(a,c){if(!g.has(a)){var d=[];g.set(a,d);var e=b("LiveVideoBroadcastStatusUpdateSubscription").subscribe(a,function(a){for(var b=0;b<d.length;b++){var c=d[b];c(a)}});h.set(a,e)}e=g.get(a);e&&e.push(c);return{unsubscribe:function(){var b=g.get(a);if(b){b=b.filter(function(a){return a!==c});g.set(a,b);if(b.length===0){b=h.get(a);b&&b.unsubscribe&&b.unsubscribe();g["delete"](a);h["delete"](a)}}}}}};e.exports=a}),null);
__d("VideoBroadcastScheduleSetStartTimeSubscription",["BaseGraphQLSubscription","relay-runtime","VideoBroadcastScheduleSetStartTimeSubscription.graphql"],(function(a,b,c,d,e,f){var g;b("relay-runtime").graphql;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getTopic=function(a){return"gqls/"+this.getSubscriptionName()+"/video_broadcast_schedule_id_"+a};d.getQuery=function(){return g!==void 0?g:g=b("VideoBroadcastScheduleSetStartTimeSubscription.graphql")};d.getQueryParameters=function(a){return{input:{video_broadcast_schedule_id:a}}};return c}(b("BaseGraphQLSubscription"));e.exports=a}),null);
__d("LiveVideoScheduleCountdown",["cx","CSS","DOM","DOMQuery"],(function(a,b,c,d,e,f,g){a=function(){"use strict";function a(a,c,d){this.$2=c,this.$3=a,this.$4=b("DOMQuery").find(this.$3,"#display_text"),b("CSS").removeClass(this.$4,"_32_g"),d!==null&&clearInterval(d),this.$5(),this.$1=setInterval(this.$5.bind(this),1e3)}var c=a.prototype;c.$6=function(){var a=this.$2-Date.now()/1e3,b=Math.floor(a%60),c=Math.floor(a/60%60);return{total:a,minutes:c,seconds:b}};c.$5=function(){var a=this.$6(),c=("0"+a.minutes).slice(-2),d=("0"+a.seconds).slice(-2);c=c+":"+d;a.total<=0?(b("DOM").setContent(this.$4,"00:00"),b("CSS").addClass(this.$4,"_32_g"),clearInterval(this.$1)):b("DOM").setContent(this.$4,c)};c.getIntervalID=function(){return this.$1};return a}();e.exports=a}),null);
__d("XLiveScheduleStatusTransitionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/live/schedule/status/",{story_dom_id:{type:"String"},story_target_id:{type:"String"},story_target_opaque_id:{type:"String"},fb_feed_context:{type:"String"}})}),null);
__d("XLiveVideoBroadcastStatusController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/live_video/broadcast_status/",{video_id:{type:"FBID",required:!0}})}),null);
__d("LiveVideoScheduleNewsFeedTransitions",["AsyncRequest","DOM","FunnelLogger","LiveVideoBroadcastStatusUpdateSubscriptionHack","LiveVideoScheduleCountdown","Random","Run","VideoBroadcastScheduleSetStartTimeSubscription","VideoBroadcastStatus","Visibility","XLiveScheduleStatusTransitionController","XLiveVideoBroadcastStatusController","clearTimeout","ge","setTimeout"],(function(a,b,c,d,e,f){var g="FACECAST_SCHEDULED_LIVE_FUNNEL";a=function(){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l){var m=this;this.$5=a;this.$7=c;this.$8=d;this.$1=e;this.$2=f;this.$4=g;this.$12=h;this.$13=i;this.$14=j;this.$6=!1;this.$9=[];this.$15=k;this.$16=b("Random").uint32();this.$3=l;var n=b("LiveVideoBroadcastStatusUpdateSubscriptionHack").subscribe(a,function(a){return m.$18(a)});this.$19();var o=b("VideoBroadcastScheduleSetStartTimeSubscription").subscribe(c,function(a){return m.$20(a)});b("Visibility").addListener(b("Visibility").VISIBLE,function(){return m.$19()});b("Run").onLeave(function(){n&&n.unsubscribe(),o&&o.unsubscribe(),m.$21("scheduled_feed_unit_left",!1,!0)});this.$22();this.$21("scheduled_feed_unit_shown",!0)}var c=a.prototype;c.$23=function(){this.$1=new Map();for(var a=this.$9,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;b("clearTimeout")(e)}this.$9=[]};c.$22=function(){var a=this,c=Date.now()/1e3,d=function(){if(f){if(g>=e.length)return"break";h=e[g++]}else{g=e.next();if(g.done)return"break";h=g.value}var d=h,i=d[0],j=d[1];d=parseInt(i,10);i=d-c;var k=a.$2.get(j);if(i<=0)a.$24(k,j);else{d=i*1e3;if(d<2147483647){i=b("setTimeout")(function(){a.$24(k,j)},d);a.$9.push(i)}}};for(var e=this.$1,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h,i=d();if(i==="break")break}};c.$24=function(a,c){if(!a)return;b("DOM").setContent(this.$4,a);a=document.getElementById("date_text"+this.$7);a&&this.$10&&b("DOM").setContent(a,this.$10);a=document.getElementById("live_video_countdown"+this.$7);if(a){var d=this.$11!==void 0?this.$11:this.$3;a=new(b("LiveVideoScheduleCountdown"))(a,d+this.$8,this.$17);this.$17=a.getIntervalID()}d=b("ge")("rescheduledBody"+this.$7);d&&this.$10&&b("DOM").setContent(d,this.$10);c==="RUNNING_LATE"?this.$21("didnt_go_live_on_time"):c==="TIMED_OUT"&&this.$21("expired")};c.$20=function(a){a=a.video_broadcast_schedule_set_start_time_subscribe.video_broadcast_schedule;var b=a.start_time,c=b-a.lobby_open_time,d=b+a.running_late_start_time,e=b+a.expiration_time;this.$10=a.formatted_start_time;this.$11=b;this.$23();this.$24(this.$2.get("RESCHEDULED"),"RESCHEDULED");this.$1.set(""+c,"LOBBY_OPEN");this.$1.set(""+d,"RUNNING_LATE");this.$1.set(""+e,"TIMED_OUT");this.$22()};c.$19=function(){var a=this,c=b("XLiveVideoBroadcastStatusController").getURIBuilder().setFBID("video_id",this.$5).getURI();new(b("AsyncRequest"))().setURI(c).setHandler(function(c){c.payload.broadcast_status==b("VideoBroadcastStatus").LIVE?a.$25():a.$15&&!a.$6&&b("setTimeout")(a.$19.bind(a),1e3)}).setErrorHandler(function(){b("setTimeout")(a.$19.bind(a),1e3)}).send()};c.$18=function(a){a=a.live_video_broadcast_status_update_subscribe;a=a.video_broadcast_status;a===b("VideoBroadcastStatus").LIVE?this.$25():a===b("VideoBroadcastStatus").SCHEDULED_CANCELED&&(this.$23(),this.$24(this.$2.get("CANCELED"),"CANCELED"))};c.$25=function(){var a=this;if(this.$6)return;this.$6=!0;var c=b("XLiveScheduleStatusTransitionController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({story_dom_id:this.$13,story_target_id:this.$14,fb_feed_context:this.$12}).setHandler(function(){return a.$21("transition_player",!1,!0)}).setMethod("POST").send()};c.$21=function(a,c,d){c&&b("FunnelLogger").startFunnel(g,this.$16),b("FunnelLogger").appendAction(g,this.$16,a),d&&b("FunnelLogger").endFunnel(g,this.$16)};return a}();e.exports=a}),null);
__d("ScheduledLiveVideoPost",["AsyncRequest","LiveVideoScheduleCountdown","RelayFBEnvironment","RelayModern","VideoBroadcastStatus","XLiveScheduleStatusTransitionController","promiseDone","setTimeout","ScheduledLiveVideoPostMetadataQuery.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("RelayModern").fetchQuery;b("RelayModern").graphql;var i={broadcastStatusBeforeStartTime:5e3,broadcastStatusAfterStartTime:1e3,stateChange:1e3},j=180;a=function(){function a(a,b,c,d,e,f){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$7(),this.$8()}var c=a.prototype;c.$7=function(){var a=this;b("promiseDone")(h(b("RelayFBEnvironment"),g!==void 0?g:g=b("ScheduledLiveVideoPostMetadataQuery.graphql"),{id:this.$3},{force:!0}),function(c){var d,e,f;f=(f=c)!=null?(f=f.node)!=null?(f=f.scheduled_video)!=null?f.broadcast_status:f:f:f;e=(e=c)!=null?(e=e.node)!=null?(e=e.scheduled_video)!=null?e.feedback_id:e:e:e;d=(d=c)!=null?(d=d.node)!=null?d.start_time:d:d;c=(c=c)!=null?(c=c.node)!=null?c.start_countdown_duration:c:c;var g=Date.now();d=d!=null?d:0;c=c!=null?c:j;if(f===b("VideoBroadcastStatus").LIVE&&e!=null)a.$9("LIVE",e);else if(a.$6!=="LOBBY_OPEN"&&g/1e3>d-c)a.$9("LOBBY_OPEN",a.$5);else if(d!==a.$4)a.$4=d,a.$9("RESCHEDULED",a.$5);else{f=d!=null&&g/1e3>d-5?i.broadcastStatusAfterStartTime:i.broadcastStatusBeforeStartTime;b("setTimeout")(function(){return a.$7()},f)}})};c.$9=function(a,c){var d=this;if(this.$6===a)return;var e=b("XLiveScheduleStatusTransitionController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(e).setData({story_dom_id:this.$2,story_target_id:c,fb_feed_context:this.$1}).setHandler(function(){d.$6=a,a!=="LIVE"&&d.$7()}).setErrorHandler(function(){b("setTimeout")(function(){return d.$9(a,c)},i.stateChange)}).setMethod("POST").send()};c.$8=function(){var a=document.getElementById("live_video_countdown"+this.$3);a&&new(b("LiveVideoScheduleCountdown"))(a,this.$4,null)};return a}();e.exports=a}),null);